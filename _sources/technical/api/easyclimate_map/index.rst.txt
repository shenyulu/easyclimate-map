easyclimate_map
===============

.. py:module:: easyclimate_map


Submodules
----------

.. toctree::
   :maxdepth: 1

   /technical/api/easyclimate_map/map_tibetan_plateau/index
   /technical/api/easyclimate_map/map_zh_CN/index
   /technical/api/easyclimate_map/tool/index
   /technical/api/easyclimate_map/version/index


Attributes
----------

.. autoapisummary::

   easyclimate_map.__version__


Functions
---------

.. autoapisummary::

   easyclimate_map.show_versions
   easyclimate_map.get_zh_CN_nation
   easyclimate_map.get_zh_CN_provinces
   easyclimate_map.get_zh_CN_river1
   easyclimate_map.get_zh_CN_river3
   easyclimate_map.get_zh_CN_1st_administration
   easyclimate_map.get_zh_CN_2nd_administration
   easyclimate_map.get_Tibetan_Plateau_basins
   easyclimate_map.read_shapefile_from_7z
   easyclimate_map.extract_outer_boundary
   easyclimate_map.transfer_boundary_to_polygon


Package Contents
----------------

.. py:data:: __version__
   :value: '2026.1.0'


.. py:function:: show_versions() -> str

.. py:function:: get_zh_CN_nation(type: Literal['line', 'polygon'] = 'line') -> geopandas.GeoDataFrame

   Get China national boundary data in either line or polygon format.

   This function returns geographic boundary data for China's national borders.
   The data includes mainland China's coastline and land borders with neighboring countries.

   Parameters
   ----------
   type : {"line", "polygon"}, default "line"
       Geometry type to return:
       - "line": Boundary lines (coastlines and land borders)
       - "polygon": Polygonal representation of China's territory

   Returns
   -------
   geopandas.GeoDataFrame
       GeoDataFrame containing China's national boundary features.
       The CRS is typically EPSG:4326 (WGS84).

   Notes
   -----
   - Data source: Standard Chinese cartographic data
   - Encoding: GB2312 (Chinese character encoding)
   - Includes territories claimed by China (e.g., Taiwan, South China Sea islands)

   .. minigallery::
       :add-heading: Example(s) related to the function

       ./dynamic_docs/zh_CN/plot_zh_CN_nation.py


.. py:function:: get_zh_CN_provinces(type: Literal['line', 'polygon'] = 'line') -> geopandas.GeoDataFrame

   Get China provincial-level administrative boundary data.

   Returns boundary data for all provincial-level divisions in China, including:
   - 23 provinces
   - 5 autonomous regions
   - 4 municipalities
   - 2 special administrative regions (Hong Kong, Macau)

   Parameters
   ----------
   type : {"line", "polygon"}, default "line"
       Geometry type to return:
       - "line": Provincial boundary lines
       - "polygon": Polygonal representation of provincial territories

   Returns
   -------
   geopandas.GeoDataFrame
       GeoDataFrame with provincial boundary features, including attributes
       for province names and administrative codes.

   Notes
   -----
   - Data follows Chinese administrative divisions as of the data source date
   - Taiwan is included as a province of China according to the data source
   - South China Sea islands are typically included in Hainan province

   .. minigallery::
       :add-heading: Example(s) related to the function

       ./dynamic_docs/zh_CN/plot_zh_CN_provinces.py


.. py:function:: get_zh_CN_river1(type: Literal['line', 'polygon'] = 'line') -> geopandas.GeoDataFrame

   Get major river systems in China (Level 1 rivers).

   Returns geographic data for China's primary river systems, including:
   - Major rivers (Yangtze, Yellow River, Pearl River, etc.)
   - Large lakes and reservoirs
   - Important water bodies

   Parameters
   ----------
   type : {"line", "polygon"}, default "line"
       Geometry type to return:
       - "line": River centerlines and watercourse boundaries
       - "polygon": Water body areas (lakes, reservoirs, wide rivers)

   Returns
   -------
   geopandas.GeoDataFrame
       GeoDataFrame containing major river and water body features.
       May include attributes for river names and hydrological classifications.

   .. minigallery::
       :add-heading: Example(s) related to the function

       ./dynamic_docs/zh_CN/plot_zh_CN_river1.py


.. py:function:: get_zh_CN_river3(type: Literal['line', 'polygon'] = 'line') -> geopandas.GeoDataFrame

   Get tertiary river systems in China (Level 3 rivers).

   Returns geographic data for smaller rivers and streams, including:
   - Tributaries and smaller watercourses
   - Minor lakes and ponds
   - Drainage networks

   Parameters
   ----------
   type : {"line", "polygon"}, default "line"
       Geometry type to return:
       - "line": Stream centerlines and minor watercourses
       - "polygon": Small water body areas

   Returns
   -------
   geopandas.GeoDataFrame
       GeoDataFrame containing tertiary river and water body features.
       Provides more detailed hydrological data than Level 1 rivers.

   Notes
   -----
   - This dataset offers higher spatial resolution than Level 1 rivers
   - May not include complete coverage for all regions

   .. minigallery::
       :add-heading: Example(s) related to the function

       ./dynamic_docs/zh_CN/plot_zh_CN_river3.py


.. py:function:: get_zh_CN_1st_administration() -> geopandas.GeoDataFrame

   Get first-level administrative center locations in China.

   Returns point locations for administrative centers at the provincial level,
   including:
   - Provincial capitals
   - Municipal government seats
   - Autonomous region capitals

   Returns
   -------
   geopandas.GeoDataFrame
       GeoDataFrame with point features representing administrative centers.
       Includes attributes for center names, administrative levels, and codes.

   Notes
   -----
   - Typically includes 34 administrative centers (31 provincial-level + 3 special)
   - Coordinates represent government seat locations


.. py:function:: get_zh_CN_2nd_administration() -> geopandas.GeoDataFrame

   Get second-level administrative center locations in China.

   Returns point locations for administrative centers at the prefecture level,
   including:
   - Prefecture-level city governments
   - Autonomous prefecture capitals
   - League administrative centers

   Returns
   -------
   geopandas.GeoDataFrame
       GeoDataFrame with point features representing prefecture-level
       administrative centers. Includes detailed location attributes.

   Notes
   -----
   - Covers approximately 333 prefecture-level divisions in China
   - Includes both urban and rural administrative centers


.. py:function:: get_Tibetan_Plateau_basins() -> geopandas.GeoDataFrame

   Get Tibetan Plateau basins data in polygon format.

   .. tip::

       - Zhang, G. (2019). Dataset of river basins map over the TP（2016）. National Tibetan Plateau / Third Pole Environment Data Center. https://doi.org/10.11888/BaseGeography.tpe.249465.file. https://cstr.cn/18406.11.BaseGeography.tpe.249465.file.
       - Zhang, G.Q., Yao, T.D., Xie, H.J., Kang, S.C., &Lei, Y.B. (2013). Increased mass over the Tibetan Plateau: From lakes or glaciers? Geophysical Research Letters, 40(10), 2125-2130. https://doi.org/10.1002/grl.50462

   Returns
   -------
   geopandas.GeoDataFrame
       GeoDataFrame containing Tibetan Plateau basins.
       The CRS is typically EPSG:4326 (WGS84).

   .. minigallery::
       :add-heading: Example(s) related to the function

       ./dynamic_docs/tibetan_plateau/plot_tibetan_plateau_basins.py


.. py:function:: read_shapefile_from_7z(filepath: str, **kwargs) -> geopandas.GeoDataFrame

   Read a shapefile directly from a 7z archive without extracting to disk.

   This function extracts a shapefile from a compressed 7z archive into a temporary
   directory, loads it as a GeoDataFrame using GeoPandas, and returns the result.
   All keyword arguments are passed through to `gpd.read_file()`.

   Parameters
   ----------
   filepath : str
       Path to the 7z archive containing the shapefile.
   **kwargs : dict, optional
       Additional keyword arguments to pass to `gpd.read_file()`.
       Common arguments include:
       - bbox : tuple
           Filter by bounding box (minx, miny, maxx, maxy)
       - mask : geometry
           Filter by geometry mask
       - rows : int
           Number of rows to read
       - encoding : str
           File encoding (e.g., 'utf-8')
       - driver : str
           GDAL/OGR driver name

   Returns
   -------
   geopandas.GeoDataFrame
       A GeoDataFrame containing the shapefile data.

   Raises
   ------
   FileNotFoundError
       If the 7z file doesn't exist or doesn't contain any .shp files.

   Notes
   -----
   - The function creates a temporary directory that is automatically cleaned up.
   - Only the first .shp file found in the archive will be read.
   - Shapefile companion files (.shx, .dbf, .prj) must also be present in the archive.

   Examples
   --------
   >>> gdf = read_shapefile_from_7z('data.7z')
   >>> gdf = read_shapefile_from_7z('data.7z', bbox=(xmin, ymin, xmax, ymax))
   >>> gdf = read_shapefile_from_7z('data.7z', encoding='utf-8', rows=1000)

   See Also
   --------
   geopandas.read_file : For available keyword arguments and reading options.


.. py:function:: extract_outer_boundary(gdf, dissolve_by=None) -> geopandas.GeoDataFrame

   Extract the outer boundary (exterior ring only) from a GeoDataFrame.

   This function dissolves all features in a GeoDataFrame and extracts only 
   the outer boundaries, excluding any interior holes or isolated internal lines.

   Parameters
   ----------
   gdf : geopandas.GeoDataFrame
       Input GeoDataFrame containing polygon or multipolygon geometries.
   dissolve_by : str or list of str, optional
       Column name(s) to dissolve by. If None (default), dissolves all features 
       into a single geometry.

   Returns
   -------
   geopandas.GeoDataFrame
       A GeoDataFrame containing only the outer boundary lines (LineString or 
       MultiLineString geometry).

   Examples
   --------
   >>> import geopandas as gpd
   >>> # Load your data
   >>> gdf = gpd.read_file('basins.shp')
   >>> 
   >>> # Extract outer boundary of all features
   >>> boundary = extract_outer_boundary(gdf)
   >>> 
   >>> # Extract boundary by specific attribute
   >>> boundary = extract_outer_boundary(gdf, dissolve_by='BasinName')
   >>> 
   >>> # Save the result
   >>> boundary.to_file('boundary.shp')

   Notes
   -----
   - For MULTIPOLYGON geometries, extracts the exterior ring of each polygon part
   - Interior holes (e.g., lakes, enclaves) are excluded
   - The output CRS is preserved from the input GeoDataFrame
   - If input contains multiple disconnected regions, output will be MultiLineString

   See Also
   --------
   geopandas.GeoDataFrame.dissolve : Dissolve geometries
   shapely.geometry.Polygon.exterior : Extract exterior ring

   .. minigallery::
       :add-heading: Example(s) related to the function

       ./dynamic_docs/tibetan_plateau/plot_tibetan_plateau_basins.py


.. py:function:: transfer_boundary_to_polygon(boundary_gdf) -> geopandas.GeoDataFrame

   Convert boundary lines (LineString or MultiLineString) to polygon geometries.

   This function reconstructs polygon geometries from their boundary lines.
   It assumes the boundary lines form closed rings.

   Parameters
   ----------
   boundary_gdf : geopandas.GeoDataFrame
       Input GeoDataFrame containing LineString or MultiLineString geometries
       representing polygon boundaries.

   Returns
   -------
   geopandas.GeoDataFrame
       A GeoDataFrame containing reconstructed Polygon or MultiPolygon geometries.

   Examples
   --------
   >>> import geopandas as gpd
   >>> # Extract boundary first
   >>> boundary = extract_outer_boundary(gdf)
   >>> 
   >>> # Convert boundary back to polygon
   >>> polygon = boundary_to_polygon(boundary)
   >>> 
   >>> # Save the result
   >>> polygon.to_file('reconstructed_polygon.shp')

   Notes
   -----
   - Input boundary lines must form closed rings
   - For MultiLineString input, creates MultiPolygon output
   - The output CRS is preserved from the input GeoDataFrame
   - This creates simple polygons without interior holes

   See Also
   --------
   :func:`extract_outer_boundary` : Extract outer boundary from polygons
   shapely.geometry.Polygon : Polygon constructor

   .. minigallery::
       :add-heading: Example(s) related to the function

       ./dynamic_docs/tibetan_plateau/plot_tibetan_plateau_basins.py


